// Tag hypergolic parts :NEEDS[!SkyhawkScienceSystem]:First so it carries over to +PART copies
// Able & AbleStar & early Delta
// NOTE THIS PATCH IS NOT COMPATABLE WITH THE SKYHAWK SYSTEM

@PART[bluedog_Able_Engine]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
@PART[bluedog_Ablestar_Engine]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
@PART[bluedog_ThorAble_Tank,bluedog_DeltaB_Tank,bluedog_Vanguard_S2_Tank,bluedog_Ablestar_Tank]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}
@PART[bluedog_Agena_Tank*,bluedog_Agena_SOT*]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}

// Agena
// @PART[bluedog_Agena_Tank*,bluedog_Agena_SOT_1p875m,bluedog_Agena_SOT_2p5m,bluedog_GATV_SPS_LFO]:NEEDS[!SkyhawkScienceSystem]:First
// {
	// %bdbTankType = HG_Monococue
// }

@PART[bluedog_Agena_Engine_XLR81]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
// @PART[bluedog_Agena_Engine_8096C]:NEEDS[!SkyhawkScienceSystem]:First
// {
 //as seperate from other Agena Engines for possible future fuel switch
	// %bdbEngineType = bdbAZ50NTO
// }
@PART[bluedog_GATV_SPS_LFO,bluedog_GATV_SPS]:NEEDS[!SkyhawkScienceSystem]:First
{
 //as seperate from other Agena Engines for possible future fuel switch
	%bdbEngineType = bdbAZ50NTO
}
// Apollo
@PART[bluedog_Apollo_Block2_SPS,bluedog_LM_Ascent_Engine,bluedog_LM_Descent_Engine]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
@PART[bluedog_Apollo_Block2_SM,bluedog_Apollo_Block3_SM,bluedog_LM_Descent_Tanks,bluedog_LM_Ascent_Cockpit]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}

// Delta
@PART[bluedog_AJ10_118F,bluedog_AJ10_118K,bluedog_AJ10_118X,bluedog_TR_201]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
@PART[bluedog_DeltaK_Stage,bluedog_DeltaP_Stage,bluedog_DeltaE_Tank]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}

// Juno
@PART[bluedog_Juno4_Engine_6K,bluedog_Juno4_Engine_45K]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
@PART[bluedog_Juno4_FuelTank_1,bluedog_Juno4_FuelTank_2]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}

// Vega
@PART[bluedog_Vega_ThirdStage_Tank]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}


// Titan old no longer modified parts bluedog_LR87,bluedog_LR87_11_Single,bluedog_LR91_5,bluedog_LR91_11,bluedog_LR91_5_FourVernier,bluedog_LR91_11_FourVernier,bluedog_LR87_11_Vac
@PART[bluedog_Titan_Transtage]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}

@PART[bluedog_Titan2_S1_Lower_Tank,bluedog_Titan2_S1_Upper_Tank,bluedog_Titan2_S2_Tank,bluedog_Titan3_S1_Stretched_Tank,bluedog_Titan4_S1_Lower_Tank,bluedog_Titan4_S2_Tank,bluedog_Titan_S2_Tank,bluedog_Titan_S1_UpperTank,bluedog_Titan_S1_LowerTank]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}	

/// Gemini lander
@PART[bluedog_Gemini_Lander_Frame,bluedog_Gemini_Lander_SaddleTank]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}
@PART[bluedog_Gemini_Lander_Engine]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}

// Other
@PART[bluedog_C1engine]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
@PART[bluedog_voyagerMarsOrbiter_propulsionModule]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}
@PART[bluedog_Peacekeeper_PostBoostVehicle,bluedog_Minuteman_PSRE]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}


//Probes go here
@PART[bluedog_Viking_Orbiter_PropulsionSection]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
@PART[bluedog_Mariner71_PropulsionModule]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}
@PART[bluedog_Clementine_Bus,bluedog_SurveyorOrbiter_Core,bluedog_Surveyor_Core]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbTankType = Hypergolic
}
@PART[bluedog_Clementine_Engine,bluedog_Ranger_Lander_Propulsion,bluedog_Surveyor_Vernier]:NEEDS[!SkyhawkScienceSystem]:First
{
	%bdbEngineType = bdbAZ50NTO
}

// Add the fuel type to all tanks. Must be done at :AFTER[Bluedog_DB_1]   :HAS[!isMonococueTank = True]:HAS[!isBalloonTank = True]
@PART[bluedog*,Bluedog*]:HAS[@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]:HAS[bdbTankType[!bdbBalloon]]]:AFTER[Bluedog_DB_1]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		SUBTYPE
		{
			name = Hypergolic
			tankType = bdbAZ50NTO
			addedMass = #$../../tank_mass$
			@addedMass *= -1
			addedCost = #$../../tank_plus_fuel_cost$
			@addedCost *= -1
			percentFilled = #$../../fuelPctFill$
		}		
	}
}

// @PART[bluedog*,Bluedog*]:HAS[#bdbTankType[HG_Monococue]]:NEEDS[!SkyhawkScienceSystem]:FOR[Bluedog_DB_3]
// {

	// @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
    // {
        // %currentSubtype = LF/O Monococue
        // @SUBTYPE[LF/O]
        // {
            // @name =  LF/O Monococue
            // @tankType = bdbLFOX_Monococue
        // }
    // }
    // @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
    // {
        // %currentSubtype = Hypergolic Monococue
        // @SUBTYPE[Hypergolic]
        // {
            // @name = Hypergolic Monococue
            // @tankType = bdb_AZ50NTO_Monococue
        // }
    // }


// } 



// Engine and tank setup
@PART[bluedog*,Bluedog*]:HAS[#bdbEngineType[bdbAZ50NTO]]:NEEDS[!SkyhawkScienceSystem]:AFTER[Bluedog_DB_2]
{
	// Changes the default fuel
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		%currentSubtype = Hypergolic
	}
	
	// Only need to change name. 2.25:2.75 is the same as 0.9:1.1
	@MODULE[ModuleEngines*],*
	{
		@PROPELLANT[LiquidFuel]
		{
			@name = Aerozine50
		}
		@PROPELLANT[Oxidizer]
		{
			@name = NTO
		}
	}
	
	// Not present in tanks, but some engines have fuel onboard
	@RESOURCE[LiquidFuel]
	{
		@name = Aerozine50
		@amount *= 5
		@maxAmount *= 5
	}
	@RESOURCE[Oxidizer]
	{
		@name = NTO
		@amount *= 5
		@maxAmount *= 5
	}
}

//This code sets default fuel type for Hypergolic tanks to Hypergolic (whatever subvariant)
@PART[bluedog*,Bluedog*]:HAS[#bdbTankType[Hypergolic]]:NEEDS[!SkyhawkScienceSystem]:BEFORE[zzzBluedog_DB_9]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		%currentSubtype = Hypergolic
	}
}

@PART[bluedog*,Bluedog*]:HAS[#bdbTankType[HG_Monococue]]:NEEDS[!SkyhawkScienceSystem]:BEFORE[zzzBluedog_DB_9]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		%currentSubtype = Hypergolic
	}
}
// Cleanup for all bdbVariables is in base B9PartSwitchTanks file

