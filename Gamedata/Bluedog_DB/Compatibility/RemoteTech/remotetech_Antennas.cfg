//Initial Antenna Pass
//Replaces ModuleDataTransmitter on all parts containing it with ModuleRTAntenna
//BEFORE[RemoteTech] is important because RemoteTech contains a patch which deletes all ModuleDataTransmitter instances without necessarily replacing them
//Note: Most antennas have recieved a 200% range buff to offset RemoteTech's more restrictive standard range model
//If you use the ROOT model in your careers you can either set worldscale to 0.5 or comment out the "@Mode1OmniRange *= 2" line

@PART[bluedog*]:HAS[@MODULE[ModuleDataTransmitter],!MODULE[ModuleCommand],!MODULE[ModuleRTAntenna]]:NEEDS[RemoteTech,!SETIRebalance]:BEFORE[RemoteTech]
{
	@MODULE[ModuleAnimateGeneric]
	{
		%allowManualControl = false
	}
	
	%MODULE[ModuleRTAntenna] 
	{
		%Mode0OmniRange = 0
		%Mode1OmniRange = #$/MODULE[ModuleDataTransmitter]/antennaPower$ 					//Antenna power is essentially antenna range so this utilizes already configured range
		@Mode1OmniRange *= 2 																//Flat 200% buff to antenna range to account for more restrictive RemoteTech range model
		%EnergyCost = #$/MODULE[ModuleDataTransmitter]/packetResourceCost$					//Draws cost of running the antenna from its packet cost
		@EnergyCost *= 0.1																	//"Passive" mode cost reduced by 90% for normal use
		%DeployFxModules = 0
		
		%TRANSMITTER 
		{
			%PacketInterval = #$/MODULE[ModuleDataTransmitter]/packetInterval$				//Transmitter values drawn directly from previously configured transmitter
			%PacketSize = #$/MODULE[ModuleDataTransmitter]/packetSize$
			%PacketResourceCost = #$/MODULE[ModuleDataTransmitter]/packetResourceCost$
		}
	}
	
	%MODULE[ModuleSPUPassive]{}
	
	!MODULE[ModuleDataTransmitter]{},*
}

//Per-Part Adjustments
@PART[bluedog_Ranger_OmniAntenna]:NEEDS[RemoteTech,!SETIRebalance]:BEFORE[RemoteTech]
{
	@MODULE[ModuleRTAntenna]
	{
		@Mode1OmniRange *= 0.1 //Results in a range of 3.2Mm
	}
}

@PART[bluedog_Mariner2_Solar_Antenna]:NEEDS[RemoteTech,!SETIRebalance]:BEFORE[RemoteTech]
{
	@MODULE[ModuleRTAntenna]
	{
		@Mode1OmniRange *= 0.1 //Results in a range of 3.2Mm
	}
}

@PART[bluedog_Mariner2_TrackingSolar_Antenna]:NEEDS[RemoteTech,!SETIRebalance]:BEFORE[RemoteTech]
{
	@MODULE[ModuleRTAntenna]
	{
		@Mode1OmniRange *= 0.1 //Results in a range of 3.2Mm
	}
}
