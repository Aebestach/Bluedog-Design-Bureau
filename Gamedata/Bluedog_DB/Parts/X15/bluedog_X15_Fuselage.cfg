PART
{
	name = bluedog_X15_Fuselage
	module = Part
	author = CobaltWolf
	
	MODEL
	{
		model = Bluedog_DB/Parts/X15/bluedog_X15_Fuselage
	}
	
	scale = 1
	rescaleFactor = 1
	
	node_stack_top = 0.0, 2.8658, 0.0, 0.0, 1.0, 0.0, 2
	// node_stack_top2 = 0.0, 3.4031, 0.0, 0.0, 1.0, 0.0, 2
	node_stack_bottom = 0.0, -2.4575, 0.0, 0.0, -1.0, 0.0, 2
	node_attach = 1.25, 0.0, 0.0, 1.0, 0.0, 0.0, 1
	mirrorRefAxis = 0, 0, -1
	
	NODE
	{
		name = wingL
		transform = wingL_Node
		size = 1
		method = FIXED_JOINT
	}
	NODE
	{
		name = wingR
		transform = wingR_Node
		size = 1
		method = FIXED_JOINT
	}	
	NODE
	{
		name = ventralFin
		transform = ventralFin_Node
		size = 1
		method = FIXED_JOINT
	}
	NODE
	{
		name = dorsalFin
		transform = dorsalFin_Node
		size = 1
		method = FIXED_JOINT
	}
	NODE
	{
		name = skidL
		transform = skidL_Node
		size = 0
		method = FIXED_JOINT
	}
	NODE
	{
		name = skidR
		transform = skidR_Node
		size = 0
		method = FIXED_JOINT
	}
	NODE
	{
		name = rearWingL
		transform = rearWingL_Node
		size = 1
		method = FIXED_JOINT
	}
	NODE
	{
		name = rearWingR
		transform = rearWingR_Node
		size = 1
		method = FIXED_JOINT
	}
	NODE
	{
		name = dropTankL
		transform = dropTankL_Node
		size = 1
		method = FIXED_JOINT
	}
	NODE
	{
		name = dropTankR
		transform = dropTankR_Node
		size = 1
		method = FIXED_JOINT
	}
	
	
	TechRequired = start
	entryCost = 3000
	cost = 1000
	category = Propulsion
	subcategory = 0
	title = K-15 Wedgetail Fuselage
	manufacturer = Bluedog Design Bureau
	description = Fuselage for the K-15 Wedgetail experimental rocket plane. Includes multiple length variants.
	real_title = X-15 Fuselage
	real_manufacturer = North American Aviation
	real_description = Fuselage for the X-15 experimental rocket plane. Includes multiple length variants.
	attachRules = 1,1,1,1,0
	CoMOffset = 0.0, 0.3, 0
	CoLOffset = 0.0, 0.3, 0
	CoPOffset = 0.0, 0.3, 0
	mass = 0.6
	dragModelType = default
	maximum_drag = 0.15
	minimum_drag = 0.1    // THESE SEEM IMPORTANT
	angularDrag = 0.75
	crashTolerance = 50
	breakingForce = 50
	breakingTorque = 50
	maxTemp = 5500 // = 3000
	emissiveConstant = 0.8
	fuelCrossFeed = True
	bulkheadProfiles = mk2, srf
	tags = X15 X-15 fueltank ?lfo liquid oxidizer propellant tank
	
	thermalBypass = true

	MODULE
	{
		name = ModuleLiftingSurface
		useInternalDragModel = False
		deflectionLiftCoeff = 0.8
		dragAtMaxAoA = 0.3
		dragAtMinAoA = 0.1
	}
	// RESOURCE
	// {
		// name = LiquidFuel
		// amount = 315
		// maxAmount = 315
	// }
	// RESOURCE
	// {
		// name = Oxidizer
		// amount = 385
		// maxAmount = 385
	// }
	MODULE:NEEDS[!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = fuelSwitchx15
		switcherDescription = Fuel
		switcherDescriptionPlural = Fuels
		baseVolume = 700
		SUBTYPE
		{
			name = LF/O
			tankType = bdbLFOX
			addedMass = -0.438
			percentFilled = 100
		}
		SUBTYPE
		{
			name = LF
			tankType = bdbX15LF
			addedMass = -0.438
			percentFilled = 100
		}
		SUBTYPE
		{
			name = LF/O SCRAM
			tankType = bdbX15SCRAM
			addedMass = -0.438
			percentFilled = 100
		}
	}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = meshSwitchLength
		switcherDescription = Length
		switcherDescriptionPlural = Lengths
		affectDragCubes = True
		affectFARVoxels = True
		parentID:NEEDS[!RealFuels] = fuelSwitchx15

		SUBTYPE
		{
			name = Base
			transform = Base
		}
		


		SUBTYPE 
		{
			name = Extended
			transform = Extended
			volumeAddedToParent:NEEDS[!RealFuels] = 80 //The real extended X-15A-2 did not use the extra space for additional fuel, but that won't stop us
			CoMOffset = 0, 0.25, 0
			NODE
			{
				name = top
				position = 0.0, 3.40308, 0.0
			}
			NODE
			{
				name = wingL
				position = -0.6531081, .25, 0.0 
			}
			NODE
			{
				name = wingR
				position = 0.6531081, .25, 0.0 
			}
			node = dropTankL
			node = dropTankR
		}
		
		SUBTYPE
		{
			name = Base+Slippers
			transform = Base
			transform = Slippers
			CoMOffset = 0, -0.05, 0
			volumeAddedToParent:NEEDS[!RealFuels] = 50 //The slipper tanks would have extra fuel, no ox, but that's fine
		}
		
		SUBTYPE 
		{
			name = Extended+Slippers
			transform = Extended
			transform = Slippers
			volumeAddedToParent:NEEDS[!RealFuels] = 130 // Add the two fuel increases together
			CoMOffset = 0, 0.2, 0
			NODE
			{
				name = top
				position = 0.0, 3.40308, 0.0
			}
			NODE
			{
				name = wingL
				position = -0.6531081, .25, 0.0 
			}
			NODE
			{
				name = wingR
				position = 0.6531081, .25, 0.0 
			}
			node = dropTankL
			node = dropTankR
		}
	}
	
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = meshSwitchVents
		switcherDescription = Vent
		switcherDescriptionPlural = Vents
		affectDragCubes = True
		affectFARVoxels = True

		SUBTYPE
		{
			name = XLR99
			transform = XLR99
		}

		SUBTYPE 
		{
			name = XLR11
			transform = XLR11
		}
	}
	
	EFFECTS
	{

		jettison
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_mini
				volume = 0.0 0.0
				volume = 1.0 1.0
				pitch = 0.0 0.75
				pitch = 1.0 0.95
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				modelName = Squad/FX/Monoprop_small
				transformName = sprayTransform
				emission = 0.0 0.0
				emission = 0.4 0.8
				emission = 1.0 1.0
				speed = 0.0 0.8
				speed = 1.0 1.0
				//localOffset = 0, 0, 1
				localScale = 1, 1, 2
				localPosition = 0, 0, 0
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_medium
				transformName = sprayTransform
				emission = 0.0 0.0
				emission = 0.01 3.0
				emission = 1.0 4.0
				speed = 0.0 0.15
				speed = 1.0 0.3
				localOffset = 0,0,1.0
				localRotation = 1,0,0,-90
				localScale = 0.4, 0.4, 0.4
			}
		}
		
	}
	
	MODULE
	{
		name = ModuleEnginesFX
		thrustVectorTransformName = sprayTransform
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 1
		heatProduction = 0
		EngineType = LiquidFuel
		runningEffectName = jettison
		stagingEnabled = false
		nonThrustMotor = True
		PROPELLANT
		{
			name = LiquidFuel
			ratio = 0.9
			DrawGauge = True
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1.1
		}
		atmosphereCurve
		{
			key = 0 5
			key = 1 1
			key = 7 0.001

		}
	}
	MODULE
	{
		name = ModuleB9AssignUiGroups
		MODULE
		{
			IDENTIFIER
			{
				name = ModuleEnginesFX
				thrustVectorTransformName = sprayTransform
				
			}
			uiGroupName = vent
			uiGroupDisplayName = Fuel Vent
		}
	}
}
